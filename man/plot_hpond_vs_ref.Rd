% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_hpond_vs_ref.R
\name{plot_hpond_vs_ref}
\alias{plot_hpond_vs_ref}
\title{Plot the influence of single-parameter variations on pond height results}
\usage{
plot_hpond_vs_ref(
  data,
  response = c("h_pond_max", "h_pond_mean"),
  ref_scenario = "s00001",
  diff = c("abs", "pct"),
  tol = 1e-09,
  quiet = FALSE
)
}
\arguments{
\item{data}{A data frame containing the simulation results. Must include
columns \code{scenario_name}, \code{h_pond_max}, \code{h_pond_mean}, and one or more
parameter columns (e.g. \code{mulde_area}, \code{mulde_height},
\code{filter_hyraulicconductivity}, \code{filter_height}, \code{storage_height}).}

\item{response}{Character string; the response variable to plot.
One of \code{"h_pond_max"} or \code{"h_pond_mean"}.}

\item{ref_scenario}{Character; the scenario ID used as reference
(default: \code{"s00001"}).}

\item{diff}{Character; type of difference to plot:
\code{"abs"} for absolute difference (\code{value - ref}) or
\code{"pct"} for percentage difference (\code{(value - ref)/ref * 100}).}

\item{tol}{Numeric; tolerance for numerical comparisons when detecting
deviations from the reference (default: \code{1e-9}).}

\item{quiet}{Logical; if \code{FALSE} (default), diagnostic messages about the
number of detected single-parameter variations are printed.}
}
\value{
A \code{ggplot} object visualizing the effect of single-parameter
variations on the selected response variable.
}
\description{
Compares simulated scenarios against a reference scenario (default: \code{"s00001"})
and plots the deviation of either \code{h_pond_max} or \code{h_pond_mean} for cases in
which \emph{exactly one} input parameter differs from the reference.

The plot title automatically includes the reference scenario's
corresponding pond height value with unit \code{"mm"},
e.g. \code{"Ref: s00001 (h_pond_max = 577.5 mm)"}.
}
\details{
The function automatically identifies parameter columns as all columns
not named \code{scenario_name}, \code{h_pond_max}, or \code{h_pond_mean}.
It then selects scenarios where \emph{exactly one} parameter differs from the
reference scenario within the given numerical tolerance.
Only those scenarios are included in the resulting plot.

The output is a \code{ggplot2} object with one facet per parameter showing the
deviation (\code{Î”}) of the selected \code{response} variable from the reference.
}
\examples{
\dontrun{
df <- data.frame(
  scenario_name = sprintf("s\%05d", 1:22),
  h_pond_max = 577.5244,
  h_pond_mean = 429.5059,
  mulde_area = c(1,10,50,100,500,1000,
                 1,10,50,100,500,1000,
                 1,10,50,100,500,1000,
                 1,10,50,100),
  mulde_height = rep(c(100,200,300,400), each = 6)[1:22],
  filter_hyraulicconductivity = 1,
  filter_height = 150,
  storage_height = 150
)

# Plot absolute deviations of h_pond_max
plot_hpond_vs_ref(df, response = "h_pond_max", ref_scenario = "s00001")

# Plot percentage deviations of h_pond_mean
plot_hpond_vs_ref(df, response = "h_pond_mean", diff = "pct")
}

}
